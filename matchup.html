<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Rage Space — Matchup</title>

<link rel="stylesheet" href="style.css"/>

<style>
/* ⬇️ KEEPING YOUR VISUAL STYLE ⬇️ */
body {
  background:#0b0f13;
  color:#e5e7eb;
  font-family:system-ui,Segoe UI,Roboto;
  margin:0;
}
.wrap { max-width:700px; margin:auto; padding:16px 12px 96px; }
.timer {
  font-size:32px;
  padding:8px 14px;
  border:1px solid #20242a;
  border-radius:12px;
  background:#0f1318;
}
.card {
  margin-top:12px;
  border:1px solid #20242a;
  border-radius:16px;
  overflow:hidden;
  background:#0f1318;
}
.imgBox { aspect-ratio:3/4; background:#111; }
.imgBox img { width:100%; height:100%; object-fit:cover; }
.bar {
  display:flex;
  justify-content:space-between;
  padding:10px 12px;
}
.vote {
  padding:10px 14px;
  border-radius:12px;
  background:#131920;
  border:1px solid #39ff14;
  color:#39ff14;
  cursor:pointer;
}
.vote:disabled { opacity:.4; cursor:default; }
.thumbs {
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-top:16px;
}
.thumb {
  border:1px solid #20242a;
  border-radius:12px;
  overflow:hidden;
  cursor:pointer;
}
.thumb img {
  width:100%;
  aspect-ratio:3/4;
  object-fit:cover;
}
.active { outline:2px solid #39ff14; }
</style>
</head>

<body>
<div class="wrap">

<h1>ART BATTLE. Faction I.</h1>

<div class="timer">04:48:00</div>
<div id="roundLabel">Round of 32</div>

<!-- ACTIVE MATCH -->
<div class="card">
  <div class="imgBox">
    <img id="imgLeft">
  </div>
  <div class="bar">
    <span>Top</span>
    <span id="countLeft">0</span>
    <button class="vote" id="voteLeft">Vote</button>
  </div>
</div>

<div class="card">
  <div class="imgBox">
    <img id="imgRight">
  </div>
  <div class="bar">
    <span>Bottom</span>
    <span id="countRight">0</span>
    <button class="vote" id="voteRight">Vote</button>
  </div>
</div>

<!-- THUMBS -->
<div class="thumbs" id="thumbs"></div>

</div>

<script>
/* =========================
   TOURNAMENT CORE LOGIC
========================= */

const rounds = [
  { name:"Round of 32", matches:[] },
  { name:"Round of 16", matches:[] },
  { name:"Quarterfinals", matches:[] },
  { name:"Semifinals", matches:[] },
  { name:"Final", matches:[] }
];

// --- Seed 32 placeholders ---
const seeds = Array.from({length:32},(_,i)=>({
  img:`https://picsum.photos/seed/${i}/600/800`
}));

// Build R32
for (let i=0;i<32;i+=2){
  rounds[0].matches.push({
    left:seeds[i],
    right:seeds[i+1],
    leftVotes:0,
    rightVotes:0,
    winner:null
  });
}

let currentRound = 0;
let currentMatch = 0;

/* =========================
   DOM
========================= */
const imgLeft   = document.getElementById("imgLeft");
const imgRight  = document.getElementById("imgRight");
const countLeft = document.getElementById("countLeft");
const countRight= document.getElementById("countRight");
const voteLeft  = document.getElementById("voteLeft");
const voteRight = document.getElementById("voteRight");
const thumbsEl  = document.getElementById("thumbs");
const roundLabel= document.getElementById("roundLabel");

/* =========================
   RENDER
========================= */
function render(){
  const match = rounds[currentRound].matches[currentMatch];

  imgLeft.src  = match.left.img;
  imgRight.src = match.right.img;
  countLeft.textContent  = match.leftVotes;
  countRight.textContent = match.rightVotes;

  voteLeft.disabled  = match.winner;
  voteRight.disabled = match.winner;

  roundLabel.textContent = rounds[currentRound].name;

  renderThumbs();
}

function renderThumbs(){
  thumbsEl.innerHTML="";
  rounds[currentRound].matches.forEach((m,i)=>{
    const t=document.createElement("div");
    t.className="thumb"+(i===currentMatch?" active":"");
    t.innerHTML=`<img src="${m.left.img}">`;
    t.onclick=()=>{ currentMatch=i; render(); };
    thumbsEl.appendChild(t);
  });
}

/* =========================
   VOTING
========================= */
function vote(side){
  const match = rounds[currentRound].matches[currentMatch];
  if (match.winner) return;

  if (side==="left") match.leftVotes++;
  else match.rightVotes++;

  if (match.leftVotes===2 || match.rightVotes===2){
    match.winner = match.leftVotes>match.rightVotes
      ? match.left
      : match.right;
    advanceWinner(match.winner);
  }

  render();
}

voteLeft.onclick  = ()=>vote("left");
voteRight.onclick = ()=>vote("right");

/* =========================
   ADVANCE
========================= */
function advanceWinner(winner){
  const nextRound = rounds[currentRound+1];
  if (!nextRound) return;

  const idx = Math.floor(currentMatch/2);
  if (!nextRound.matches[idx]){
    nextRound.matches[idx]={
      left:winner,
      right:null,
      leftVotes:0,
      rightVotes:0,
      winner:null
    };
  } else {
    nextRound.matches[idx].right = winner;
  }

  // Move forward if round finished
  if (rounds[currentRound].matches.every(m=>m.winner)){
    currentRound++;
    currentMatch=0;
  }
}

/* =========================
   INIT
========================= */
render();
</script>

</body>
</html>