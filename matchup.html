<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Rage Space — Matchup</title>

<link rel="stylesheet" href="style.css"/>

<style>
/* ⬇️ KEEPING YOUR VISUAL STYLE ⬇️ */
body {
  background:#0b0f13;
  color:#e5e7eb;
  font-family:system-ui,Segoe UI,Roboto;
  margin:0;
}
.wrap { max-width:700px; margin:auto; padding:16px 12px 96px; }
.timer {
  font-size:32px;
  padding:8px 14px;
  border:1px solid #20242a;
  border-radius:12px;
  background:#0f1318;
}
.card {
  margin-top:12px;
  border:1px solid #20242a;
  border-radius:16px;
  overflow:hidden;
  background:#0f1318;
}
.imgBox { aspect-ratio:3/4; background:#111; }
.imgBox img { width:100%; height:100%; object-fit:cover; }
.bar {
  display:flex;
  justify-content:space-between;
  padding:10px 12px;
}
.vote {
  padding:10px 14px;
  border-radius:12px;
  background:#131920;
  border:1px solid #39ff14;
  color:#39ff14;
  cursor:pointer;
}
.vote:disabled { opacity:.4; cursor:default; }

/* ===== THUMBS GRID ===== */
.thumbs {
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-top:16px;
}
.thumb {
  border:1px solid #20242a;
  border-radius:12px;
  overflow:hidden;
  cursor:pointer;
  background:#0f1318;
}
.active { outline:2px solid #39ff14; }

/* ===== VS SPLIT THUMB (shows BOTH images) ===== */
.thumb-img {
  position: relative;
  width: 100%;
  aspect-ratio: 3 / 4;
  overflow: hidden;
  background:#0b0f13;
}

.thumb-img img {
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
}

/* Seam is the diagonal from (100%,0%) to (0%,100%) */
.thumb-img img.left {
  clip-path: polygon(0% 0%, 100% 0%, 0% 100%);
}
.thumb-img img.right {
  clip-path: polygon(100% 0%, 100% 100%, 0% 100%);
}

/* ✅ Perfectly aligned diagonal green line (matches seam) */
.thumb-img::after{
  content:"";
  position:absolute;
  top:50%;
  left:50%;
  width:220%;
  height:3px;
  background:#39ff14;
  transform:translate(-50%,-50%) rotate(-45deg); /* <-- FIXED */
  opacity:.65;
  pointer-events:none;
  box-shadow:0 0 10px rgba(57,255,20,.65);
}
</style>
</head>

<body>
<div class="wrap">

<h1>ART BATTLE. Faction I.</h1>

<div class="timer">04:48:00</div>
<div id="roundLabel">Round of 32</div>

<!-- ACTIVE MATCH -->
<div class="card">
  <div class="imgBox">
    <img id="imgLeft" alt="Active top">
  </div>
  <div class="bar">
    <span>Top</span>
    <span id="countLeft">0</span>
    <button class="vote" id="voteLeft">Vote</button>
  </div>
</div>

<div class="card">
  <div class="imgBox">
    <img id="imgRight" alt="Active bottom">
  </div>
  <div class="bar">
    <span>Bottom</span>
    <span id="countRight">0</span>
    <button class="vote" id="voteRight">Vote</button>
  </div>
</div>

<!-- THUMBS -->
<div class="thumbs" id="thumbs"></div>

</div>

<script>
/* =========================
   TOURNAMENT CORE LOGIC
   First to 2 votes advances
========================= */

const rounds = [
  { name:"Round of 32", matches:[] },
  { name:"Round of 16", matches:[] },
  { name:"Quarterfinals", matches:[] },
  { name:"Semifinals", matches:[] },
  { name:"Final", matches:[] }
];

// --- Seed 32 placeholders (swap later for your real art URLs) ---
const seeds = Array.from({length:32},(_,i)=>({
  img:`https://picsum.photos/seed/${i}/600/800`
}));

// Build R32 matches
for (let i=0;i<32;i+=2){
  rounds[0].matches.push({
    left:seeds[i],
    right:seeds[i+1],
    leftVotes:0,
    rightVotes:0,
    winner:null
  });
}

let currentRound = 0;
let currentMatch = 0;

/* =========================
   DOM
========================= */
const imgLeft   = document.getElementById("imgLeft");
const imgRight  = document.getElementById("imgRight");
const countLeft = document.getElementById("countLeft");
const countRight= document.getElementById("countRight");
const voteLeft  = document.getElementById("voteLeft");
const voteRight = document.getElementById("voteRight");
const thumbsEl  = document.getElementById("thumbs");
const roundLabel= document.getElementById("roundLabel");

/* =========================
   RENDER
========================= */
function render(){
  const match = rounds[currentRound].matches[currentMatch];

  imgLeft.src  = match.left.img;
  imgRight.src = match.right.img;
  countLeft.textContent  = match.leftVotes;
  countRight.textContent = match.rightVotes;

  voteLeft.disabled  = !!match.winner;
  voteRight.disabled = !!match.winner;

  roundLabel.textContent = rounds[currentRound].name;

  renderThumbs();
}

function renderThumbs(){
  thumbsEl.innerHTML = "";

  rounds[currentRound].matches.forEach((m,i)=>{
    const t = document.createElement("div");
    t.className = "thumb" + (i === currentMatch ? " active" : "");

    t.innerHTML = `
      <div class="thumb-img">
        <img class="left"  src="${m.left.img}"  alt="thumb left">
        <img class="right" src="${m.right.img}" alt="thumb right">
      </div>
    `;

    t.onclick = () => {
      currentMatch = i;
      render();
    };

    thumbsEl.appendChild(t);
  });
}

/* =========================
   VOTING
========================= */
function vote(side){
  const match = rounds[currentRound].matches[currentMatch];
  if (match.winner) return;

  if (side === "left") match.leftVotes++;
  else match.rightVotes++;

  // First to 2 wins
  if (match.leftVotes >= 2 || match.rightVotes >= 2){
    match.winner = (match.leftVotes > match.rightVotes) ? match.left : match.right;
    advanceWinner(match.winner);
  }

  render();
}

voteLeft.onclick  = () => vote("left");
voteRight.onclick = () => vote("right");

/* =========================
   ADVANCE
========================= */
function advanceWinner(winner){
  const nextRound = rounds[currentRound + 1];
  if (!nextRound) return; // tournament complete

  const idx = Math.floor(currentMatch / 2);

  if (!nextRound.matches[idx]){
    nextRound.matches[idx] = {
      left: winner,
      right: null,
      leftVotes: 0,
      rightVotes: 0,
      winner: null
    };
  } else {
    nextRound.matches[idx].right = winner;
  }

  // If the whole current round is complete, move to next round
  const thisRoundDone = rounds[currentRound].matches.every(m => !!m.winner);
  if (thisRoundDone){
    currentRound++;
    currentMatch = 0;
  }
}

/* =========================
   INIT
========================= */
render();
</script>

</body>
</html>